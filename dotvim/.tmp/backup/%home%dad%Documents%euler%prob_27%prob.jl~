using Primes

function prob_27()

    bd = 1000

    b_vals = primes(41,bd)

    good_pairs = []

    start_a = -bd+1
    if start_a % 2 == 0
        start_a += 1
    end

    end_a = bd-1

    max_len = 0
    arg_max = []

    for b in b_vals

        for a in start_a:2:end_a

            for s in [-1,1]

                f = x -> x^2 + a*x + s*b

                i = 1

                while true

                    v = abs(f(i))

                    if !isprime(v)

                        break
                    end

                    i += 1

                end

                if i > max_len

                    max_len = i
                    arg_max = [a,s*b]

                end
            end
        end
    end

    answer = 0
    if length(arg_max)>0
        answer = prod(arg_max)
    end

    return answer

end

prob_27()
