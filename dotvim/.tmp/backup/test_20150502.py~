#!/usr/bin/python3

from random import *

def print_line(a):
  for i in range(16):
    print("%8X" % a[i], end=" ")
  print("")

def cmp_swap_lines(a,b):
  for i in range(16):
    if b[i] < a[i]:
      a[i], b[i] = b[i], a[i]

def cmp_swap_lines_swiz(a,b):
  for i in range(16):
    if b[i^1] < a[i]:
      a[i], b[i^1] = b[i^1], a[i]

seed()

logkeysize = 7
maxkey = (1<<logkeysize)-1
col_dim = 2

num_trials = 1000
num_groups = 2

ave = 0
ave_rows = 0

for trial in range(num_trials):
  a = []
  b = []
  for i in range(16):
    c = [randint(0,maxkey) for r in range(col_dim)]
    c.sort()
    a.append(c[0])
    b.append(c[1])
  #cmp_swap_lines_swiz(a,b)

  ave += len(set(a))
  ave += len(set(b))

  arows = [r>>3 for r in a]
  brows = [r>>3 for r in b]
  ave_rows += len(set(arows))
  ave_rows += len(set(brows))

print_line(a)
print_line(b)

ave /= (num_trials*num_groups)
print("average unique = %lf/%d" % (ave,16))

ave_rows /= (num_trials*num_groups)
print("average unique rows = %lf/%d" % (ave_rows,16))
