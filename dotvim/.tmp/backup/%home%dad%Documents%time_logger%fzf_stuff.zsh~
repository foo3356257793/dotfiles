__fzfcmd() {
    [ -n "$TMUX_PANE" ] && { [ "${FZF_TMUX:-0}" != 0 ] || [ -n "$FZF_TMUX_OPTS" ]; } &&
        echo "fzf-tmux ${FZF_TMUX_OPTS:--d${FZF_TMUX_HEIGHT:-40%}} -- " || echo "fzf"
}

fzf-time-log-widget() {
    local cmd="echo 'new' ; /home/dad/Documents/time_logger/get_tags.py"
    setopt localoptions pipefail no_aliases 2> /dev/null
    local dir="$(eval "$cmd" | FZF_DEFAULT_OPTS="--height ${FZF_TMUX_HEIGHT:-40%} --reverse $FZF_DEFAULT_OPTS $FZF_ALT_C_OPTS" $(__fzfcmd) +m)"
    ./log_time.py "$dir"
    unset dir # ensure this doesn't end up appearing in prompt expansion
    local ret=$?
    zle fzf-redraw-prompt
    return $ret
}
zle     -N    fzf-time-log-widget
bindkey '\el' fzf-time-log-widget

