#!/usr/bin/sage

if __name__ == "__main__":

    """
    num new fractions is euler_phi(d)
    for each d
    """

    bd = 10**6
    #bd = 8

    tot_ratios = [1] * (bd+1)

    primes = prime_range(bd)

    n_iter = 0

    for p in primes:

        n_iter += 1
        if (n_iter % 1000) == 0:
            print('sieve...', n_iter)

        rat = (p-1)/p

        for m in range(p,bd+1,p):

            tot_ratios[m] *= rat

    n_iter = 0

    S = 0
    for d in range(2,bd+1):

        n_iter += 1
        if (n_iter % 1000) == 0:
            print('sum...', n_iter)

        print(d, d*tot_ratios[d])

        S += d * tot_ratios[d]

    print(S)
