#!/usr/bin/sage

import requests
import json

if __name__ == "__main__":


    fnames = ["young_women.json", "parents.json", "leaders.json"]
    emails = []

    non_emails = ['apet5012@student.dodea.edu' ]

    for fname in fnames:

        with open(fname) as json_file:
            data = json.load(json_file)

        members = data['members']

        for member in members:

            if 'emailAddress' in member:
                email = member['emailAddress']
                if email != None and not email in emails:
                    emails.append(email)

                if email in non_emails:
                    print("bad email %s for %s" % (email, member['name']))


    emails.sort()

    fp = open("emails.txt", "w")

    for email in emails:

        fp.write("%s\n" % email)

    fp.close()
