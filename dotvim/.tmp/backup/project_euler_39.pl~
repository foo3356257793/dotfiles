#!/usr/bin/perl

=head1 NAME

project_euler_39 - If p is the perimeter of a right angle triangle with integral
length sides, {a,b,c}, there are exactly three solutions for p = 120.

{20,48,52}, {24,45,51}, {30,40,50}

For which value of p â‰¤ 1000, is the number of solutions maximised?

=cut

# a + b + c = p
# a^2 + b^2 = c^2
# c = p - b - a
# a^2 + b^2 = (p - b - a)^2
# a^2 + b^2 = a^2 + b^2 + p^2 - 2pb - 2pa + 2ab
# 2pb - 2ab = p^2 - 2pa
# 2b(p-a) = p(p-2a)
# b = p(p-2a)/(2[p-a])

use strict;
use warnings;

my $boundOnP = 1000;
my @numberOfSolutions = (0) x ($boundOnP + 1);
for (my $p = 1; $p <= $boundOnP; $p++) {
  for (my $a = 1; $a <= $p/3; $a++) {
    if (($p*($p - 2*$a)) % (2*($p-$a)) == 0) {
      my $b = ($p * ($p - 2*$a)) / (2 * ($p - $a));
      if ($b > 0) {
        my $c = $p - $a - $b;
        if (($c > 0)) {
          $numberOfSolutions[$p]++;
        }
      }
    }
  }
}

bonk;

my @sorted = sort{$numberOfSolutions[$b] <=> $numberOfSolutions[$a]} (0..$boundOnP);

print "the max is $numberOfSolutions[$sorted[0]] at $sorted[0]\n";

__END__
for (my $index = 1; $index <= $boundOnP; $index++) {
  print "$index: $numberOfSolutions[$index]\n";
}
